<h2>Описание</h2>
<p>Пример реализации REST API для электронного магазина. Проект написан на Python, с использованием Django. В качестве бд используется PostgreSQL. Связь с бд реализуется через Django ORM. В бд уже имеются небольшой объем данных для тестирования функционала.</p>
<p>В блоках ниже подробно описан процесс развертывания, перечень реализованных запросов и пример тестового сценария.</p>

<h2>Развертывание</h2>
<p>Клонируем репозиторий: git clone https://github.com/Raiksler/E-comm-ms.git</p>
<p>Устанавливаем пакет poetry для подтягивания зависимостей: apt install poetry</p>
<p>Переходим в корневую директорию проекта: cd E-comm-ms/</p>
<p>Устанавливаем зависимости: poetry install</p>

<p>Переходим в директорию с бд: cd ecom_postgres/</p>
<p>Собираем образ контейнера: docker build -t ecom:v1 .</p>
<p>Запускаем контейнер с бд: docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=mysecretpassword ecom:v1</p>

<p>Переходим в директорию приложения: cd ../ecom</p>
<p>Запускаем стенд: poetry run python3 manage.py runserver</p>

<p>С этого момента, на http://127.0.0.1:8000/ можно посылать запросы.</p>

<h2>Описание запросов</h2>
<p>Описание всех доступных запросов и пример команды через Curl:</p>

<p><b>Операции над товарами:</b></p>
<p>Получение списка всех товаров в наличии (не упорядочено): curl http://127.0.0.1:8000/items</p>
<p>Добавление нового товара (Необходимо задать название, цену и описание товара): curl -X POST http://127.0.0.1:8000/items/newitem -H 'Content-Type: application/json' -d '{"product":"iphone 4s","price":"8000", "details":"Some details about phone"}'</p>
<p>Просмотр детальной информации о товаре (Необходимо задать параметр id): curl 127.0.0.1:8000/items/details?id=some_id</p>
<p><b>Фильтрация и сортировка:</b></p>
<p>Сортировка списка товаров по имени в порядке возрастания: curl 127.0.0.1:8000/items?sorted_by_name=a-z</p>
<p>Сортировка списка товаров по имени в порядке убывания: curl 127.0.0.1:8000/items?sorted_by_name=z-a</p>
<p>Сортировка списка товаров по цене в порядке возрастания: curl 127.0.0.1:8000/items?sorted_by_price=up</p>
<p>Сортировка списка товаров по цене в порядке убывания: curl 127.0.0.1:8000/items?sorted_by_price=down</p>
<p>Фильтрация списка товаров по имени: curl 127.0.0.1:8000/items?filtered_by_name=some_name</p>
<p>Фильтрация списка товаров по цене: curl 127.0.0.1:8000/items?filtered_by_price=some_price</p>
<p><b>Операции с корзиной:</b></p>
<p>Добавление/удаление товаров из корзины (параметр id - указатель на id товара, параметр quantity задает количество, на которое изменится представление товара в корзине. Параметр quantity может быть отрицательным, в случае, если необходимо уменьшить количество товара в корзине): curl -X POST http://127.0.0.1:8000/cart/change_cart -H 'Content-Type: application/json' -d '{"id":4, "quantity":3}'</p>
<p>Получение списка товаров в корзине curl http://127.0.0.1:8000/cart</p>

<h2>Тестовый сценарий:</h2>
<p>1) Создаем новый товар. Наименование iphone 4s, цена 8000, плейсхолдер описания: curl -X POST http://127.0.0.1:8000/items/newitem -H 'Content-Type: application/json' -d '{"product":"iphone 4s","price":"8000", "details":"Some details about phone"}'</p>
<p>2) Находим только что созданный товар по части названия: curl 127.0.0.1:8000/items?filtered_by_name=4s</p>
<p>3) Используя id товара, полученные из предыдущего пункта, ознакомимся с детальной информацией о товаре: curl 127.0.0.1:8000/items/details?id=11</p>
<p>4) Добавим две единицы этого товара в корзину: 
curl -X POST http://127.0.0.1:8000/cart/change_cart -H 'Content-Type: application/json' -d '{"id":11, "quantity":2}'</p>
<p>5) Проверим содержимое корзины: curl http://127.0.0.1:8000/cart</p>
<p>6) Уберем одну единицу товара из корзины: curl -X POST http://127.0.0.1:8000/cart/change_cart -H 'Content-Type: application/json' -d '{"id":11, "quantity":-1}'</p>
<p>7) Еще раз проверим содержимое корзины: curl http://127.0.0.1:8000/cart</p>
